Index: app.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>import pymysql.cursors\r\n\r\nimport os\r\nfrom flask import Flask, request, render_template, redirect, url_for, abort, flash\r\nfrom flask import session, g\r\n\r\napp = Flask(__name__)\r\napp.secret_key = 'une cle(token) : grain de sel(any random string)'\r\ndef get_db():\r\n\r\n    if 'db' not in g:\r\n        g.db = pymysql.connect(\r\n            host=\"localhost\",\r\n            user='mrose',\r\n            password='mdp',\r\n            database='BDD_mrose',\r\n            charset=\"utf8mb4\",\r\n            cursorclass=pymysql.cursors.DictCursor\r\n        )\r\n    return g.db\r\n\r\n@app.teardown_appcontext\r\ndef teardown_db(exception):\r\n    db = g.pop('db', None)\r\n    if db is not None:\r\n        db.close()\r\n\r\n\r\n@app.teardown_appcontext\r\ndef teardown_db(exception):\r\n    db = g.pop('db', None)\r\n    if db is not None:\r\n        db.close()\r\n\r\n\r\n\r\n@app.route('/')\r\ndef show_accueil():\r\n    return render_template('layout.html')\r\n\r\n\r\n########COLLECTE#########\r\n\r\n@app.route('/collecte/show')\r\ndef show_collecte():\r\n    mycursor = get_db().cursor()\r\n    sql=''' SELECT id_collecte AS id, id_type_dechet AS type, quantite_dechet_collecte AS quantite, id_centre_collecte AS centre, id_tournee AS tournee\r\n    FROM Collecte'''\r\n    mycursor.execute(sql)\r\n    Collecte = mycursor.fetchall()\r\n    sql=''' SELECT lieu_collecte AS lieu , id_centre_collecte as id\r\n    FROM Centre_collecte'''\r\n    mycursor.execute(sql)\r\n    Centre_collecte = mycursor.fetchall()\r\n    sql = ''' SELECT libelle_type_dechet AS libelle , id_type_dechet as id\r\n        FROM type_dechet'''\r\n    mycursor.execute(sql)\r\n    type_dechet = mycursor.fetchall()\r\n\r\n    sql = ''' SELECT date_tournee AS date , id_tournee as id\r\n            FROM Tournee'''\r\n    mycursor.execute(sql)\r\n    Tournee = mycursor.fetchall()\r\n    return render_template('collecte/show_collecte.html', collecte=Collecte , centreCollect=Centre_collecte, typeDechet=type_dechet, tournee= Tournee)\r\n\r\n\r\n@app.route('/collecte/add', methods=['GET'])\r\ndef add_collecte():\r\n    print('''affichage du formulaire pour saisir une collecte''')\r\n    return render_template('collecte/add_collecte.html')\r\n\r\n@app.route('/collecte/delete')\r\ndef delete_collecte():\r\n    print('''suppression d'une collecte''')\r\n    id=request.args.get('id', None)\r\n    print(id)\r\n    mycursor = get_db().cursor()\r\n    tuple_param=(id)\r\n    sql=\"DELETE FROM collecte WHERE id_collecte=%s;\"\r\n    mycursor.execute(sql,tuple_param)\r\n\r\n    get_db().commit()\r\n    print(request.args)\r\n    print(request.args.get('id'))\r\n    id=request.args.get('id',0)\r\n    return redirect('/collecte/show')\r\n\r\n@app.route('/collecte/edit', methods=['GET'])\r\ndef edit_collecte():\r\n    print('''affichage du formulaire pour modifier une collecte''')\r\n    print(request.args)\r\n    print(request.args.get('id'))\r\n    id = request.args.get('id')\r\n    mycursor = get_db().cursor()\r\n    sql = '''SELECT id_collecte AS id, id_type_dechet AS type, quantite_dechet_collecte AS quantite, id_centre_collecte AS centre, id_tournee AS tournee\r\n             FROM Collecte\r\n             WHERE id_collecte=%s;'''\r\n    tuple_param = (id,)\r\n    mycursor.execute(sql, tuple_param)\r\n    Collecte = mycursor.fetchone()\r\n    sql = '''SELECT id_centre_collecte AS id, lieu_collecte AS lieu\r\n             FROM Centre_collecte'''\r\n    mycursor.execute(sql)\r\n    Centre_collecte = mycursor.fetchall()\r\n    sql = '''SELECT id_type_dechet AS id, libelle_type_dechet AS libelle\r\n             FROM type_dechet'''\r\n    mycursor.execute(sql)\r\n    type_dechet = mycursor.fetchall()\r\n    sql = '''SELECT date_tournee AS date , id_tournee as id\r\n             FROM Tournee'''\r\n    mycursor.execute(sql)\r\n    Tournee = mycursor.fetchall()\r\n    return render_template('collecte/edit_collecte.html', collecte=Collecte, centreCollect=Centre_collecte, typeDechet=type_dechet, tournee=Tournee)\r\n\r\n\r\n@app.route('/collecte/add', methods=['POST'])\r\ndef valid_add_collecte():\r\n    print('''ajout de la collecte dans le tableau''')\r\n    quantite = request.form.get('quantite')\r\n    type = request.form.get('type')\r\n    centre = request.form.get('centre_collecte')\r\n    tournee = request.form.get('tournee')\r\n    message = 'quantite :' + quantite + ' - type :' + type + ' - centre de collecte :' + centre + ' - tournee : ' + tournee\r\n    print(message)\r\n    mycursor = get_db().cursor()\r\n    tuple_param=(quantite,type)\r\n    sql=\"INSERT INTO Collecte(id_collecte, quantite_dechet_collecte, id_type_dechet, id_centre_collecte, id_tournee) VALUES (NULL, %s, %s);\"\r\n    mycursor.execute(sql,tuple_param)\r\n    get_db().commit()\r\n    return redirect('/collecte/show')\r\n\r\n@app.route('/collecte/edit', methods=['POST'])\r\ndef valid_edit_collecte():\r\n    print('''modification de la collecte dans le tableau''')\r\n    id = request.form.get('id')\r\n    quantite = request.form.get('quantite')\r\n    type = request.form.get('type')\r\n    centre = request.form.get('centre_collecte')\r\n    tournee = request.form.get('tournee')\r\n    message = 'quantite :' + quantite + ' - type :' + type + ' - centre de collecte :' + centre + ' - tournee : ' + tournee + ' pour la collecte d identifiant :' + id\r\n    print(message)\r\n    mycursor = get_db().cursor()\r\n    tuple_param=(quantite,type,id)\r\n    sql=\"UPDATE Collecte SET quantite_dechet_collecte = %s, id_type_dechet= %s, id_centre_collecte= %s, id_tournee= %s WHERE id_collecte=%s;\"\r\n    mycursor.execute(sql,tuple_param)\r\n    get_db().commit()\r\n    return redirect('/collecte/show')\r\n\r\n\r\n########TOURNEE########\r\n\r\n@app.route('/Tournee/show')\r\ndef show_Tournee():\r\n    mycursor = get_db().cursor()\r\n    sql = '''\r\n        SELECT t.id_tournee, t.date_tournee, t.id_centre_recyclage, c.lieu_recyclage, t.id_camion, t.temps\r\n        FROM Tournee t\r\n        INNER JOIN Centre_recyclage c ON t.id_centre_recyclage = c.id_centre_recyclage\r\n    '''\r\n    mycursor.execute(sql)\r\n    Tournee = mycursor.fetchall()\r\n\r\n    return render_template('Tournee/show_Tournee.html', Tournee=Tournee)\r\n\r\n\r\n@app.route('/Tournee/add', methods=['GET'])\r\ndef add_Tournee():\r\n    print('''affichage du formulaire pour saisir une Tournee''')\r\n    return render_template('Tournee/add_Tournee.html')\r\n\r\n\r\n@app.route('/Tournee/delete')\r\ndef delete_Tournee():\r\n    print('''Suppression d'une Tournée''')\r\n    id_tournee = request.args.get('id')\r\n\r\n    if id_tournee:\r\n        try:\r\n            id_tournee = int(id_tournee)\r\n            mycursor = get_db().cursor()\r\n            tuple_param = (id_tournee,)\r\n            sql = \"DELETE FROM Tournee WHERE id_tournee=%s;\"\r\n            mycursor.execute(sql, tuple_param)\r\n            get_db().commit()\r\n\r\n            message = f'info: suppression d\\'une tournee avec - id_tournee =  {id_tournee}'\r\n            flash(message, 'alert-warning')\r\n        except ValueError:\r\n            print(\"L'ID de la tournée n'est pas un entier valide.\")\r\n\r\n    return redirect('/Tournee/show')\r\n\r\n\r\n\r\n@app.route('/Tournee/edit', methods=['GET'])\r\ndef edit_Tournee():\r\n    print('''affichage du formulaire pour modifier une Tournee''')\r\n    print(request.args)\r\n    print(request.args.get('id'))\r\n    tournee_id = request.args.get('id')\r\n    mycursor = get_db().cursor()\r\n    sql = '''SELECT id_tournee, date_tournee, id_centre_recyclage, id_camion, temps\r\n             FROM Tournee\r\n             WHERE id_tournee=%s;'''\r\n    tuple_param = (tournee_id,)\r\n    mycursor.execute(sql, tuple_param)\r\n    Tournee = mycursor.fetchone()\r\n    return render_template('Tournee/edit_Tournee.html', tournee=Tournee)\r\n\r\n\r\n@app.route('/Tournee/add', methods=['POST'])\r\ndef valid_add_Tournee():\r\n    print('''Ajout de la tournée dans la table''')\r\n    id_tournee = request.form.get('id_tournee')\r\n    date_tournee = request.form.get('date_tournee')\r\n    id_centre_recyclage = request.form.get('id_centre_recyclage')\r\n    id_camion = request.form.get('id_camion')\r\n    temps = request.form.get('temps')\r\n\r\n    message = (\r\n        f'info: Tournée ajoutée - id_tournee : {id_tournee}, Date : {date_tournee}, '\r\n        f'id_Centre_recyclage : {id_centre_recyclage}, id_Camion : {id_camion}, '\r\n        f'Temps : {temps}'\r\n    )\r\n\r\n    flash(message, 'alert-success')\r\n\r\n    mycursor = get_db().cursor()\r\n    tuple_param = (id_tournee, date_tournee, id_centre_recyclage, id_camion, temps)\r\n    sql = \"INSERT INTO Tournee(id_tournee, date_tournee, id_centre_recyclage, id_camion, temps) VALUES (%s, %s, %s, %s, %s);\"\r\n    mycursor.execute(sql, tuple_param)\r\n    get_db().commit()\r\n\r\n    return redirect('/Tournee/show')\r\n\r\n\r\n@app.route('/Tournee/edit', methods=['POST'])\r\ndef valid_edit_Tournee():\r\n    print('''Modification de la Tournée dans le tableau''')\r\n    id_tournee = request.form.get('id_tournee')\r\n    date_tournee = request.form.get('date_tournee')\r\n    id_centre_recyclage = request.form.get('id_centre_recyclage')\r\n    id_camion = request.form.get('id_camion')\r\n    temps = request.form.get('temps')\r\n\r\n    message = (\r\n        f'info: Tournée modifiée - id_tournee : {id_tournee}, Date : {date_tournee}, '\r\n        f'id_Centre_recyclage : {id_centre_recyclage}, id_Camion : {id_camion}, '\r\n        f'Temps : {temps}'\r\n    )\r\n    flash(message, 'alert-success')\r\n\r\n    mycursor = get_db().cursor()\r\n    tuple_param = (id_tournee, date_tournee, id_centre_recyclage, id_camion, temps, id_tournee)\r\n    sql = \"UPDATE Tournee SET id_tournee = %s, date_tournee = %s, id_centre_recyclage = %s, id_camion = %s, temps = %s WHERE id_tournee = %s;\"\r\n    mycursor.execute(sql, tuple_param)\r\n    get_db().commit()\r\n\r\n    return redirect('/Tournee/show')\r\n\r\n\r\n\r\nif __name__ == '__main__':\r\n    app.run()
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app.py b/app.py
--- a/app.py	(revision 74d09e9e1f54fe0b44dee799601330bd93304c6f)
+++ b/app.py	(date 1701103874011)
@@ -135,12 +135,12 @@
     id = request.form.get('id')
     quantite = request.form.get('quantite')
     type = request.form.get('type')
-    centre = request.form.get('centre_collecte')
+    centre = request.form.get('centre')
     tournee = request.form.get('tournee')
-    message = 'quantite :' + quantite + ' - type :' + type + ' - centre de collecte :' + centre + ' - tournee : ' + tournee + ' pour la collecte d identifiant :' + id
+    message = 'quantite :' + quantite + ' - type : ' + type + ' - centre de collecte : ' + centre + ' - tournee : ' + tournee
     print(message)
     mycursor = get_db().cursor()
-    tuple_param=(quantite,type,id)
+    tuple_param=(quantite,type,centre,tournee,id)
     sql="UPDATE Collecte SET quantite_dechet_collecte = %s, id_type_dechet= %s, id_centre_collecte= %s, id_tournee= %s WHERE id_collecte=%s;"
     mycursor.execute(sql,tuple_param)
     get_db().commit()
Index: static/mes_styles.css
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\nbody{\r\n    font-family: \"Avenir-Medium\", sans-serif;\r\n    overflow: hidden;\r\n    background-color: black;\r\n    color: white;\r\n}\r\n\r\nhtml{\r\n    scroll-behavior: smooth;\r\n}\r\n\r\n/*      NAV     */\r\n\r\n.nav{\r\n    font-family: \"Poppins\", sans-serif;\r\n    display: flex;\r\n    justify-content: flex-start;\r\n    width: 100%;\r\n    padding: 30px 0;\r\n}\r\n\r\n.nav ul {\r\n    list-style: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.nav li {\r\n    margin: 0px;\r\n    padding: 10px;\r\n}\r\n\r\n.nav a {\r\n    text-decoration: none;\r\n    margin: 0 15px;\r\n    color: white;\r\n    font-weight: 100;\r\n    font-size: large;\r\n}\r\n\r\n#page-actuelle{\r\n    background-color: white;\r\n    margin-left: 10px;\r\n}\r\n\r\n#autre-page1 a {\r\n    color: white;\r\n}\r\n\r\n#autre-page1:hover{\r\n    background-color: white;\r\n    color: black;\r\n}\r\n\r\n#autre-page1:hover a {\r\n    color: black;\r\n}\r\n\r\n\r\n#autre-page2 a {\r\n    color: white;\r\n}\r\n\r\n#autre-page2:hover{\r\n    background-color: white;\r\n    color: black;\r\n}\r\n\r\n#autre-page2:hover a {\r\n    color: black;\r\n}\r\n\r\n#autre-page3 a {\r\n    color: white;\r\n}\r\n\r\n#autre-page3:hover{\r\n    background-color: white;\r\n    color: black;\r\n}\r\n\r\n#autre-page3:hover a {\r\n    color: black;\r\n}\r\n\r\n#autre-page4 a {\r\n    color: white;\r\n}\r\n\r\n#autre-page4:hover{\r\n    background-color: white;\r\n    color: black;\r\n}\r\n\r\n#autre-page4:hover a {\r\n    color: black;\r\n}\r\n\r\na[href]{\r\n    color: black;\r\n    text-decoration: none;\r\n}\r\n\r\n.menu-burger{\r\n    display: none;\r\n}\r\n\r\n@media  screen and (max-width:600px) {\r\n    .menu-burger{\r\n        display: block;\r\n        margin-left: 15px;\r\n    }\r\n\r\n    .navbar.dark .nav_ul_link{\r\n        background-color: #000 !important;\r\n    }\r\n\r\n    .navbar .nav_ul_link{\r\n        flex-direction: column ;\r\n        position: absolute;\r\n        background-color: rgb(229, 229, 229) ;\r\n        margin-top: 52px;\r\n        padding-bottom: 10000px;\r\n        width: 100%;\r\n        height: 100vh;\r\n        align-items: center;\r\n        justify-content: center;\r\n        margin-left: -100% ;\r\n        transition: 0.40s;\r\n    }\r\n\r\n    .navbar{\r\n        justify-content: space-between;\r\n    }\r\n\r\n    .nav_ul_link li {\r\n        margin-bottom: 25px;\r\n        font-size: 1.3em;\r\n    }\r\n    .nav-search input{\r\n        border-radius: 8px;\r\n    }\r\n    .navbar .nav-div{\r\n        align-items:normal;\r\n    }\r\n\r\n}\r\n\r\n/*     BODY     */\r\n\r\n#background-video {\r\n    height: 100vh;\r\n    width: 100vw;\r\n    object-fit: cover;\r\n    position: absolute;\r\n    z-index: -1;\r\n    }\r\n\r\n.page-2 #background-video {\r\n    display: none; /* Ajoutez cette ligne pour masquer la vidéo dans la page-2 */\r\n}\r\n\r\n#titre-accueil{\r\n    color: white;\r\n    font-size: 60px;\r\n    text-align: center;\r\n    margin-top: 10%;\r\n    margin-bottom: 0;\r\n}\r\n\r\n.slogan{\r\n    color: white;\r\n    text-align: center;\r\n    margin-top: 5px;\r\n    margin-bottom: 50px;\r\n    font-weight: 100;\r\n}\r\n\r\n.button {\r\n    padding: 1em 2em;\r\n    border: none;\r\n    border-radius: 5px;\r\n    font-weight: bold;\r\n    letter-spacing: 5px;\r\n    text-transform: uppercase;\r\n    color: black;\r\n    transition: all 500ms;\r\n    font-size: 15px;\r\n    display: block;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    overflow: hidden;\r\n    outline: 2px solid white;\r\n    opacity: 0.6;\r\n    width: fit-content;\r\n  }\r\n\r\n.button:hover {\r\n    color: black;\r\n    outline: 2px solid white;\r\n    box-shadow: 1px 1px 8px 4px white;\r\n    opacity: 1;\r\n  }\r\n\r\n.bas-de-page{\r\n    display: flex;\r\n    flex-direction: row;\r\n    margin-top: 170px;\r\n    margin-left: 40px;\r\n\r\n}\r\n\r\n.haut-de-page{\r\n    margin-left: 80px;\r\n    margin-right: 0;\r\n}\r\n\r\n#carré-blanc{\r\n    color: white;\r\n    opacity: 1;\r\n}\r\n\r\n#carré-blanc2{\r\n    color: white;\r\n    opacity: 1;\r\n}\r\n\r\n.carré{\r\n    width: 10px;\r\n    height: 10px;\r\n    display: flex;\r\n    margin-left: 10px;\r\n    background-color: white;\r\n    opacity: 0.5;\r\n    margin-top: 70px;\r\n}\r\n\r\n.carré:hover{\r\n    background-color: white;\r\n    opacity: 1;\r\n}\r\n\r\n@keyframes clignoter {\r\n        0% { opacity: 1; }\r\n        50% { opacity: 0; }\r\n        100% { opacity: 1; }\r\n    }\r\n\r\n.clignotant {\r\n        animation: clignoter 2s infinite;\r\n        display: block;\r\n        margin-left: auto;\r\n        margin-right: auto;\r\n    }\r\n\r\n.clignotant-2 {\r\n        animation: clignoter 1s infinite;\r\n        display: block;\r\n        margin-left: auto;\r\n        margin-right: auto;\r\n        margin-bottom: 210px;\r\n    }\r\n\r\n.page-2{\r\n    color: white;\r\n    font-size: large;\r\n    margin-top: 5%;\r\n    text-align: justify;\r\n}\r\n\r\n#page-2{\r\n    margin-top: 10%;\r\n}\r\n\r\n.tableau{\r\n    background-color: white;\r\n    color: black;\r\n    margin-right: auto;\r\n    margin-left: auto;\r\n    width: 70%;\r\n}\r\n\r\n.add{\r\n    border: 1px solid black;\r\n    border-radius: 5px;\r\n    background-color: green;\r\n    color: white;\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    display: block;\r\n    margin-bottom: 40px;\r\n    padding: 10px 30px 10px 30px;\r\n}\r\n\r\n.colonne{\r\n    text-align: center;\r\n}\r\n\r\n.ligne:hover{\r\n    background-color: lightgrey;\r\n}\r\n\r\n.titre{\r\n    text-align: center;\r\n}\r\n\r\n.formulaire{\r\n    margin-left: auto;\r\n    margin-right: auto;\r\n    background-color: white;\r\n    color: black;\r\n    width: 40%;\r\n    border-radius: 10px;\r\n    text-align: center;\r\n}\r\n\r\n.valider{\r\n    border-radius: 5px;\r\n    border: black;\r\n    background-color: limegreen;\r\n    color: white;\r\n    margin-top: 20px;\r\n    padding: 5px;\r\n\r\n}\r\n\r\n.annuler{\r\n    border-radius: 5px;\r\n    border: black;\r\n    background-color: red;\r\n    color: white;\r\n    margin-top: 20px;\r\n    padding: 5px;\r\n}\r\n\r\n.éditer{\r\n    border-radius: 5px;\r\n    border: black;\r\n    background-color: limegreen;\r\n    color: white;\r\n    padding: 5px;\r\n}\r\n\r\n.supprimer{\r\n    border-radius: 5px;\r\n    border: black;\r\n    background-color: red;\r\n    color: white;\r\n    padding: 5px;\r\n}\r\n\r\n.colonne{\r\n    background-color: rgb(240,240,240);\r\n    padding-bottom: 15px;\r\n    padding-top: 15px;\r\n}\r\n\r\n.barre{\r\n    width: 80px;\r\n}\r\n\r\n#btn1{\r\n    color:white;\r\n}\r\n\r\n#btn2{\r\n    color: white;\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/static/mes_styles.css b/static/mes_styles.css
--- a/static/mes_styles.css	(revision 74d09e9e1f54fe0b44dee799601330bd93304c6f)
+++ b/static/mes_styles.css	(date 1701102819582)
@@ -6,6 +6,10 @@
     color: white;
 }
 
+body.scrollable {
+    overflow: auto;
+}
+
 html{
     scroll-behavior: smooth;
 }
Index: tricycleco.sql
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>-- Suppression des tables\r\nDROP TABLE IF EXISTS Collecte;\r\nDROP TABLE IF EXISTS Conteneur;\r\nDROP TABLE IF EXISTS Tournee;\r\nDROP TABLE IF EXISTS type_dechet;\r\nDROP TABLE IF EXISTS Employe;\r\nDROP TABLE IF EXISTS Camion;\r\nDROP TABLE IF EXISTS se_compose;\r\nDROP TABLE IF EXISTS se_termine;\r\nDROP TABLE IF EXISTS Centre_recyclage;\r\nDROP TABLE IF EXISTS Centre_collecte;\r\n\r\n-- Création des tables\r\nCREATE TABLE Camion(\r\n   id_camion INT,\r\n   immatriculation_camion VARCHAR(50),\r\n   numero_camion INT,\r\n   PRIMARY KEY(id_camion)\r\n);\r\n\r\nCREATE TABLE Centre_collecte(\r\n   id_centre_collecte INT,\r\n   lieu_collecte VARCHAR(50),\r\n   PRIMARY KEY(id_centre_collecte)\r\n);\r\n\r\nCREATE TABLE Centre_recyclage(\r\n   id_centre_recyclage INT,\r\n   lieu_recyclage VARCHAR(50),\r\n   PRIMARY KEY(id_centre_recyclage)\r\n);\r\n\r\nCREATE TABLE Employe(\r\n   id_employe INT,\r\n   numero_tel_employe INT,\r\n   nom_employe VARCHAR(50),\r\n   prenom_employe VARCHAR(50),\r\n   adresse_employe VARCHAR(50),\r\n   id_camion INT,\r\n   PRIMARY KEY(id_employe),\r\n   FOREIGN KEY(id_camion) REFERENCES Camion(id_camion)\r\n);\r\n\r\nCREATE TABLE type_dechet(\r\n   id_type_dechet INT,\r\n   libelle_type_dechet VARCHAR(50),\r\n   PRIMARY KEY(id_type_dechet)\r\n);\r\n\r\nCREATE TABLE Tournee(\r\n   id_tournee INT,\r\n   date_tournee DATE,\r\n   id_centre_recyclage INT NOT NULL,\r\n   id_camion INT NOT NULL,\r\n   temps TIME,\r\n   PRIMARY KEY(id_tournee),\r\n   FOREIGN KEY(id_centre_recyclage) REFERENCES Centre_recyclage(id_centre_recyclage),\r\n   FOREIGN KEY(id_camion) REFERENCES Camion(id_camion)\r\n);\r\n\r\nCREATE TABLE Collecte(\r\n   id_collecte INT,\r\n   quantite_dechet_collecte INT,\r\n   id_type_dechet INT NOT NULL,\r\n   id_centre_collecte INT NOT NULL,\r\n   id_tournee INT NOT NULL,\r\n   PRIMARY KEY(id_collecte),\r\n   FOREIGN KEY(id_type_dechet) REFERENCES type_dechet(id_type_dechet),\r\n   FOREIGN KEY(id_centre_collecte) REFERENCES Centre_collecte(id_centre_collecte),\r\n   FOREIGN KEY(id_tournee) REFERENCES Tournee(id_tournee)\r\n);\r\n\r\nCREATE TABLE Conteneur(\r\n   id_conteneur INT,\r\n   id_centre_collecte INT NOT NULL,\r\n   id_type_dechet INT NOT NULL,\r\n   id_centre_recyclage INT NOT NULL,\r\n   PRIMARY KEY(id_conteneur),\r\n   FOREIGN KEY(id_centre_collecte) REFERENCES Centre_collecte(id_centre_collecte),\r\n   FOREIGN KEY(id_type_dechet) REFERENCES type_dechet(id_type_dechet),\r\n   FOREIGN KEY(id_centre_recyclage) REFERENCES Centre_recyclage(id_centre_recyclage)\r\n);\r\n\r\n-- Insertion de données\r\nINSERT INTO Camion VALUES (1, 'ABC123', 101);\r\nINSERT INTO Camion VALUES (2, 'XYZ789', 102);\r\nINSERT INTO Camion VALUES (3, 'DEF456', 103);\r\nINSERT INTO Camion VALUES (4, 'GHI157', 104);\r\nINSERT INTO Camion VALUES (5, 'JKL945', 105);\r\nINSERT INTO Camion VALUES (6, 'MNO849', 106);\r\n\r\nINSERT INTO Centre_collecte VALUES (1, 'Paris Nord');\r\nINSERT INTO Centre_collecte VALUES (2, 'Lyon Ouest');\r\nINSERT INTO Centre_collecte VALUES (3, 'Marseille Est');\r\nINSERT INTO Centre_collecte VALUES (4, 'Bordeaux Sud');\r\nINSERT INTO Centre_collecte VALUES (5, 'Lille Centre');\r\nINSERT INTO Centre_collecte VALUES (6, 'Toulouse Nord');\r\nINSERT INTO Centre_collecte VALUES (7, 'Nice Ouest');\r\nINSERT INTO Centre_collecte VALUES (8, 'Strasbourg Sud');\r\n\r\nINSERT INTO Centre_recyclage VALUES (1, '14 rue de Paris');\r\nINSERT INTO Centre_recyclage VALUES (2, '2 rue de Belfort');\r\nINSERT INTO Centre_recyclage VALUES (4, '7 rue Marconi');\r\nINSERT INTO Centre_recyclage VALUES (5, '28 rue Branly');\r\n\r\nINSERT INTO Employe VALUES (1, 0101010101, 'Lalai', 'Maria', '1 rue des Pommiers', 1);\r\nINSERT INTO Employe VALUES (2, 0202020202, 'Rose', 'Jean', '12 rue du Puit', 2);\r\nINSERT INTO Employe VALUES (3, 0303030303, 'Albertoni', 'Thierry', '4 rue Pasteur', 3);\r\nINSERT INTO Employe VALUES (4, 0404040404, 'Einstein', 'Albert', '30 rue de la Révolution', 4);\r\nINSERT INTO Employe VALUES (5, 0505050505, 'Dine', 'Amandine', '45 rue de la Curtine', 5);\r\nINSERT INTO Employe VALUES (6, 0606060606, 'Carminati', 'Martine', '2 rue Marie Curie', 6);\r\n\r\nINSERT INTO type_dechet VALUES (1, 'Bois');\r\nINSERT INTO type_dechet VALUES (2, 'Aluminium');\r\nINSERT INTO type_dechet VALUES (3, 'Plastique');\r\nINSERT INTO type_dechet VALUES (4, 'Carton');\r\nINSERT INTO type_dechet VALUES (5, 'Papier');\r\nINSERT INTO type_dechet VALUES (6, 'Verre');\r\nINSERT INTO type_dechet VALUES (7, 'Cuivre');\r\nINSERT INTO type_dechet VALUES (8, 'Textile');\r\n\r\nINSERT INTO Tournee VALUES (1, '2023-01-01', 1, 1, 35);\r\nINSERT INTO Tournee VALUES (2, '2023-02-01', 2, 2, 40);\r\nINSERT INTO Tournee VALUES (3, '2023-03-01', 1, 1, 30);\r\nINSERT INTO Tournee VALUES (4, '2023-04-01', 2, 2, 45);\r\nINSERT INTO Tournee VALUES (5, '2023-05-01', 1, 1, 35);\r\nINSERT INTO Tournee VALUES (6, '2023-06-01', 2, 2, 40);\r\nINSERT INTO Tournee VALUES (7, '2023-07-01', 1, 1, 30);\r\nINSERT INTO Tournee VALUES (8, '2023-08-01', 2, 2, 50);\r\n\r\n\r\n\r\nINSERT INTO Collecte VALUES (1, 100, 1, 1, 1);\r\nINSERT INTO Collecte VALUES (2, 200, 2, 2, 2);\r\nINSERT INTO Collecte Values (3, 300, 3, 3, 3);\r\n\r\nINSERT INTO Conteneur VALUES (1, 1, 1, 1);\r\nINSERT INTO Conteneur VALUES (2, 2, 2, 2);\r\n\r\n-- Afficher qté tot collectée par type déchet\r\nSELECT type_dechet.libelle_type_dechet, SUM(Collecte.quantite_dechet_collecte) AS total_quantite\r\nFROM type_dechet\r\nJOIN Collecte ON type_dechet.id_type_dechet = Collecte.id_type_dechet\r\nGROUP BY type_dechet.libelle_type_dechet;\r\n\r\n-- Afficher employés +  tournées\r\nSELECT Employe.nom_employe, Employe.prenom_employe, Tournee.date_tournee, Tournee.id_tournee\r\nFROM Employe\r\nJOIN Tournee ON Employe.id_camion = Tournee.id_camion;\r\n\r\n\r\nSELECT id_type_dechet AS id, libelle_type_dechet AS libelle\r\n             FROM type_dechet;
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/tricycleco.sql b/tricycleco.sql
--- a/tricycleco.sql	(revision 74d09e9e1f54fe0b44dee799601330bd93304c6f)
+++ b/tricycleco.sql	(date 1701103057703)
@@ -130,9 +130,14 @@
 
 
 
-INSERT INTO Collecte VALUES (1, 100, 1, 1, 1);
-INSERT INTO Collecte VALUES (2, 200, 2, 2, 2);
-INSERT INTO Collecte Values (3, 300, 3, 3, 3);
+INSERT INTO Collecte VALUES (1, 273, 1, 1, 1);
+INSERT INTO Collecte VALUES (2, 089, 2, 2, 2);
+INSERT INTO Collecte Values (3, 358, 3, 3, 3);
+INSERT INTO Collecte Values (4, 424, 4, 4, 4);
+INSERT INTO Collecte Values (5, 289, 5, 5, 5);
+INSERT INTO Collecte Values (6, 681, 6, 6, 6);
+INSERT INTO Collecte Values (7, 602, 7, 7, 7);
+INSERT INTO Collecte Values (8, 456, 8, 8, 8);
 
 INSERT INTO Conteneur VALUES (1, 1, 1, 1);
 INSERT INTO Conteneur VALUES (2, 2, 2, 2);
Index: templates/collecte/show_collecte.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% extends 'layout.html' %}\r\n\r\n{% block title %}\r\n    <title>afficher les collectes</title>\r\n{% endblock %}\r\n\r\n{% block body %}\r\n    <h1 class=\"titre\">LES COLLECTES</h1>\r\n    <hr class=\"barre\">\r\n    <br><br>\r\n\r\n    <div>\r\n        <a href=\"/collecte/add\">\r\n            <button class=\"add\">Ajouter une collecte</button>\r\n        </a>\r\n        <table class=\"tableau\">\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">id</th>\r\n                    <th scope=\"col\">quantite (kg)</th>\r\n                    <th scope=\"col\">type de déchet</th>\r\n                    <th scope=\"col\">centre de collecte</th>\r\n                    <th scope=\"col\">tournée</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n            {% if collecte | length >= 1 %}\r\n                {% for type in collecte %}\r\n                   <tr class=\"ligne\">\r\n                       <td class=\"colonne\">{{ type.id }}</td>\r\n                       <td class=\"colonne\">{{ type.quantite }}</td>\r\n                       <td class=\"colonne\">{% for j in typeDechet %}\r\n                             {% if j.id == type.type %}\r\n                               {{ j.libelle }} ({{j.id}})\r\n                             {% endif %}\r\n                           {% endfor %}</td>\r\n\r\n                       <td class=\"colonne\">{% for i in centreCollect %}\r\n                             {% if i.id == type.centre %}\r\n                               {{ i.lieu }} ({{i.id}})\r\n                             {% endif %}\r\n                           {% endfor %}</td>\r\n\r\n                       <td class=\"colonne\">{% for k in tournee %}\r\n                             {% if k.id == type.tournee %}\r\n                               {{ k.date }} ({{k.id}})\r\n                             {% endif %}\r\n                           {% endfor %}</td>\r\n\r\n                       <td class=\"colonne\">\r\n                          <a id=\"btn1\" class=\"éditer\" href=\"/collecte/edit?id={{ type.id }}&amp;param2={{type.quantite}}\">Editer</a>&nbsp;\r\n                          <a id=\"btn2\" class=\"supprimer\" href=\"/collecte/delete?id={{ type.id }}&amp;libelle={{ type.quantite }}\">Supprimer</a>\r\n                       </td>\r\n                   </tr>\r\n                {% endfor %}\r\n            {% else %}\r\n                    <tr>\r\n                          <td>\r\n                              Aucune collecte\r\n                          </td>\r\n                   </tr>\r\n            {% endif %}\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n{% endblock %}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/templates/collecte/show_collecte.html b/templates/collecte/show_collecte.html
--- a/templates/collecte/show_collecte.html	(revision 74d09e9e1f54fe0b44dee799601330bd93304c6f)
+++ b/templates/collecte/show_collecte.html	(date 1701102794103)
@@ -5,6 +5,7 @@
 {% endblock %}
 
 {% block body %}
+    <body class="scrollable">
     <h1 class="titre">LES COLLECTES</h1>
     <hr class="barre">
     <br><br>
@@ -63,4 +64,5 @@
             </tbody>
         </table>
     </div>
+    </body>
 {% endblock %}
\ No newline at end of file
Index: .idea/Tricycleco.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<module type=\"PYTHON_MODULE\" version=\"4\">\r\n  <component name=\"NewModuleRootManager\">\r\n    <content url=\"file://$MODULE_DIR$\" />\r\n    <orderEntry type=\"jdk\" jdkName=\"Python 3.10\" jdkType=\"Python SDK\" />\r\n    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\r\n  </component>\r\n</module>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/Tricycleco.iml b/.idea/Tricycleco.iml
--- a/.idea/Tricycleco.iml	(revision 74d09e9e1f54fe0b44dee799601330bd93304c6f)
+++ b/.idea/Tricycleco.iml	(date 1701101596830)
@@ -2,7 +2,7 @@
 <module type="PYTHON_MODULE" version="4">
   <component name="NewModuleRootManager">
     <content url="file://$MODULE_DIR$" />
-    <orderEntry type="jdk" jdkName="Python 3.10" jdkType="Python SDK" />
+    <orderEntry type="jdk" jdkName="Python 3.11" jdkType="Python SDK" />
     <orderEntry type="sourceFolder" forTests="false" />
   </component>
 </module>
\ No newline at end of file
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"Black\">\r\n    <option name=\"sdkName\" value=\"Python 3.11 (flaskProject)\" />\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" project-jdk-name=\"Python 3.10\" project-jdk-type=\"Python SDK\" />\r\n  <component name=\"PyCharmProfessionalAdvertiser\">\r\n    <option name=\"shown\" value=\"true\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 74d09e9e1f54fe0b44dee799601330bd93304c6f)
+++ b/.idea/misc.xml	(date 1701101596836)
@@ -3,7 +3,7 @@
   <component name="Black">
     <option name="sdkName" value="Python 3.11 (flaskProject)" />
   </component>
-  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.10" project-jdk-type="Python SDK" />
+  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.11" project-jdk-type="Python SDK" />
   <component name="PyCharmProfessionalAdvertiser">
     <option name="shown" value="true" />
   </component>
